---
layout: page
title: K
parent: SWERC 2016
---
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link
rel="stylesheet"
href="../../styles/base.css"
type="text/css">
</head>
<body>
<center>
<table
cellpadding	="20"
width		="100%">
<tr>
<td id="Base"><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Balls and Needles</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.footnotetext{margin:0ex; padding:0ex;}
div.footnotetext P{margin:0px; text-indent:1em;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.titlemain{margin:1ex 2ex 2ex 1ex;}
.titlerest{margin:0ex 2ex;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
.cellpadding0 tr td{padding:0;}
.cellpadding1 tr td{padding:1px;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.hfill{border:none;height:1px;width:200%;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20%; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.part{margin:2ex auto;text-align:center}
</style>
  </head>
  <body>

<div class="center"><span style="font-size:xx-large"><span style="font-weight:bold">Balls and Needles</span></span></div>

<p><img align="right" src="9449771460820814?image+K+balls_comb.png" width="200">Joana Vasconcelos is a Portuguese artist
who uses everyday objects in her creations,
like electric irons or plastic cutlery.
She is an inspiration to Ana,
who wants to make ceiling hanging sculptures with 
straight knitting needles and balls of wool.
For safety reasons, 
there will be a ball at each end of each needle.
Knitting needles vary in colour, length and thickness 
  (to allow intersections of needles).</p>


<p>Sculptures are to be exhibited in room corners,
which provide a 3D Cartesian coordinate system,
with many lamps on the ceiling.
Sculpture designs are made with the coordinates of the centres
of the balls of wool in which knitting needles are stuck.
That is, 
each needle <span style="font-style:italic">N</span> is represented by a set of two different triples: 
<span style="font-style:italic">N</span> = {(<span style="font-style:italic">x</span>, <span style="font-style:italic">y</span>, <span style="font-style:italic">z</span>), (<span style="font-style:italic">x</span>′, <span style="font-style:italic">y</span>′, <span style="font-style:italic">z</span>′)}.</p><p>Ana dislikes <span style="font-style:italic">closed chains</span>.
A <span style="font-style:italic">true closed chain</span> is a sequence of <span style="font-style:italic">k</span> distinct needles, 
<span style="font-style:italic">N</span><sub>1</sub>, <span style="font-style:italic">N</span><sub>2</sub>, …, <span style="font-style:italic">N</span><sub><span style="font-style:italic">k</span></sub> (for some <span style="font-style:italic">k</span>≥ 3), such that:
</p><ul class="itemize"><li class="li-itemize">

<span style="font-style:italic">N</span><sub>1</sub> = {(<span style="font-style:italic">x</span><sub>1</sub>, <span style="font-style:italic">y</span><sub>1</sub>, <span style="font-style:italic">z</span><sub>1</sub>),   (<span style="font-style:italic">x</span><sub>2</sub>, <span style="font-style:italic">y</span><sub>2</sub>, <span style="font-style:italic">z</span><sub>2</sub>)},  
<span style="font-style:italic">N</span><sub>2</sub> = {(<span style="font-style:italic">x</span><sub>2</sub>, <span style="font-style:italic">y</span><sub>2</sub>, <span style="font-style:italic">z</span><sub>2</sub>),   (<span style="font-style:italic">x</span><sub>3</sub>, <span style="font-style:italic">y</span><sub>3</sub>, <span style="font-style:italic">z</span><sub>3</sub>)},   
…, <br>
<br>
 <span style="font-style:italic">N</span><sub><span style="font-style:italic">k</span></sub> = {(<span style="font-style:italic">x</span><sub><span style="font-style:italic">k</span></sub>, <span style="font-style:italic">y</span><sub><span style="font-style:italic">k</span></sub>, <span style="font-style:italic">z</span><sub><span style="font-style:italic">k</span></sub>),   (<span style="font-style:italic">x</span><sub><span style="font-style:italic">k</span>+1</sub>, <span style="font-style:italic">y</span><sub><span style="font-style:italic">k</span>+1</sub>, <span style="font-style:italic">z</span><sub><span style="font-style:italic">k</span>+1</sub>)},
   and   
(<span style="font-style:italic">x</span><sub><span style="font-style:italic">k</span>+1</sub>, <span style="font-style:italic">y</span><sub><span style="font-style:italic">k</span>+1</sub>, <span style="font-style:italic">z</span><sub><span style="font-style:italic">k</span>+1</sub>) = (<span style="font-style:italic">x</span><sub>1</sub>, <span style="font-style:italic">y</span><sub>1</sub>, <span style="font-style:italic">z</span><sub>1</sub>).
</li></ul><p>But her dislike of closed chains is so extreme
that the shadow of the sculpture on the floor 
has to be free of “floor closed chains”.
Given any needle <span style="font-style:italic">N</span> = {(<span style="font-style:italic">x</span>, <span style="font-style:italic">y</span>, <span style="font-style:italic">z</span>), (<span style="font-style:italic">x</span>′, <span style="font-style:italic">y</span>′, <span style="font-style:italic">z</span>′)},
let <span style="font-style:italic">N</span><sup>↓</sup> = {(<span style="font-style:italic">x</span>, <span style="font-style:italic">y</span>), (<span style="font-style:italic">x</span>′, <span style="font-style:italic">y</span>′)} denote 
the shadow of needle <span style="font-style:italic">N</span> on the floor.
For Ana (who is an artist),
a <span style="font-style:italic">floor closed chain</span> is also a sequence of <span style="font-style:italic">k</span> distinct needles, 
<span style="font-style:italic">N</span><sub>1</sub>, <span style="font-style:italic">N</span><sub>2</sub>, …, <span style="font-style:italic">N</span><sub><span style="font-style:italic">k</span></sub> (for some <span style="font-style:italic">k</span>≥ 3), such that:
</p><ul class="itemize"><li class="li-itemize">

<span style="font-style:italic">N</span><sub><span style="font-style:italic">i</span></sub><sup>↓</sup> ≠ <span style="font-style:italic">N</span><sub><span style="font-style:italic">j</span></sub><sup>↓</sup>, 
for every 1 ≤ <span style="font-style:italic">i</span> &lt; <span style="font-style:italic">j</span> ≤ <span style="font-style:italic">k</span>  
(the <span style="font-style:italic">k</span> needle shadows are all distinct);
</li><li class="li-itemize"><span style="font-style:italic">N</span><sub>1</sub><sup>↓</sup> = {(<span style="font-style:italic">x</span><sub>1</sub>, <span style="font-style:italic">y</span><sub>1</sub>),   (<span style="font-style:italic">x</span><sub>2</sub>, <span style="font-style:italic">y</span><sub>2</sub>)},  
<span style="font-style:italic">N</span><sub>2</sub><sup>↓</sup> = {(<span style="font-style:italic">x</span><sub>2</sub>, <span style="font-style:italic">y</span><sub>2</sub>),   (<span style="font-style:italic">x</span><sub>3</sub>, <span style="font-style:italic">y</span><sub>3</sub>)},   
…, <br>
<br>
 <span style="font-style:italic">N</span><sub><span style="font-style:italic">k</span></sub><sup>↓</sup> = {(<span style="font-style:italic">x</span><sub><span style="font-style:italic">k</span></sub>, <span style="font-style:italic">y</span><sub><span style="font-style:italic">k</span></sub>),   (<span style="font-style:italic">x</span><sub><span style="font-style:italic">k</span>+1</sub>, <span style="font-style:italic">y</span><sub><span style="font-style:italic">k</span>+1</sub>)},
   and   
(<span style="font-style:italic">x</span><sub><span style="font-style:italic">k</span>+1</sub>, <span style="font-style:italic">y</span><sub><span style="font-style:italic">k</span>+1</sub>) = (<span style="font-style:italic">x</span><sub>1</sub>, <span style="font-style:italic">y</span><sub>1</sub>).
</li></ul><p>Consider the sculpture depicted in the figure,
which has the following four knitting needles:
</p><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell"><table style="border-spacing:6px;border-collapse:separate;margin-left:0;margin-right:auto;" class="cellpading0"><tr><td style="text-align:left;white-space:nowrap" >  <span style="font-style:italic">A</span> = {(12, 12, 8),   (10, 5, 11)},</td><td style="text-align:left;white-space:nowrap" ><span style="font-style:italic">B</span> = {(12, 12, 8),   (4, 14, 21)}, <br>
</td></tr>
<tr><td style="text-align:left;white-space:nowrap" >  <span style="font-style:italic">C</span> = {(12, 12, 8),   (12, 20, 8)},</td><td style="text-align:left;white-space:nowrap" ><span style="font-style:italic">D</span> = {(4, 14, 21),   (10, 5, 21)}.
</td></tr>
</table></td></tr>
</table><p>
This structure is not free of closed chains because,
although there is no true closed chain,
the sequence of needles <span style="font-style:italic">A</span>, <span style="font-style:italic">B</span>, <span style="font-style:italic">D</span> is a floor closed chain.</p><!--TOC subsection id="sec79" Task-->
<h3 id="sec79" class="subsection">Task</h3><!--SEC END --><p>Write a program that, given the knitting needles of a sculpture,
determines whether there is a true or a floor closed chain in the sculpture.</p><!--TOC subsection id="sec80" Input-->
<h3 id="sec80" class="subsection">Input</h3><!--SEC END --><p>The first line of the input has one integer, <span style="font-style:italic">K</span>,
which is the number of knitting needles in the sculpture.
Each of the following <span style="font-style:italic">K</span> lines contains six integers,
<span style="font-style:italic">x</span><sub>1</sub>, <span style="font-style:italic">y</span><sub>1</sub>, <span style="font-style:italic">z</span><sub>1</sub>, <span style="font-style:italic">x</span><sub>2</sub>, <span style="font-style:italic">y</span><sub>2</sub>, and <span style="font-style:italic">z</span><sub>2</sub>, 
which indicate that {(<span style="font-style:italic">x</span><sub>1</sub>, <span style="font-style:italic">y</span><sub>1</sub>, <span style="font-style:italic">z</span><sub>1</sub>),   (<span style="font-style:italic">x</span><sub>2</sub>, <span style="font-style:italic">y</span><sub>2</sub>, <span style="font-style:italic">z</span><sub>2</sub>)} 
is the set of triples of a needle.
Any two distinct needles are represented by different sets of triples.</p><!--TOC subsection id="sec81" Constraints-->
<h3 id="sec81" class="subsection">Constraints</h3><!--SEC END --><table style="border-spacing:6px;border-collapse:separate;margin-left:0;margin-right:auto;" class="cellpading0"><tr><td style="text-align:right;white-space:nowrap" >1</td><td style="text-align:center;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" >≤</td><td style="text-align:center;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="font-style:italic">K</span></td><td style="text-align:center;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" >≤</td><td style="text-align:center;white-space:nowrap" > </td><td style="text-align:left;white-space:nowrap" >50 000</td><td style="text-align:left;white-space:nowrap" >Number of knitting needles <br>
</td></tr>
<tr><td style="text-align:right;white-space:nowrap" >1</td><td style="text-align:center;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" >≤</td><td style="text-align:center;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="font-style:italic">x</span><sub><span style="font-style:italic">i</span></sub>, <span style="font-style:italic">y</span><sub><span style="font-style:italic">i</span></sub>, <span style="font-style:italic">z</span><sub><span style="font-style:italic">i</span></sub></td><td style="text-align:center;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" >&lt;</td><td style="text-align:center;white-space:nowrap" > </td><td style="text-align:left;white-space:nowrap" >1 000</td><td style="text-align:left;white-space:nowrap" >Coordinates of each triple 
</td></tr>
</table>
<!--TOC subsection id="sec82" Output-->
<h3 id="sec82" class="subsection">Output</h3><!--SEC END --><p>The output has two lines, each one with a string.
The string in the first line is:
<span style="font-family:monospace">True closed chains</span>, 
if there is some true closed chain in the sculpture;
<span style="font-family:monospace">No true closed chains</span>, otherwise.
The string in the second line is:
<span style="font-family:monospace">Floor closed chains</span>, 
if there is some floor closed chain in the sculpture;
<span style="font-family:monospace">No floor closed chains</span>, otherwise.</p>

<!--TOC subsection id="sec83" Sample Input 1-->
<h3 id="sec83" class="subsection">Sample Input 1</h3><!--SEC END --><pre class="verbatim">4
12 12 8 10 5 11
12 12 8 4 14 21
12 12 8 12 20 8
4 14 21 10 5 21
</pre><!--TOC subsection id="sec84" Sample Output 1-->
<h3 id="sec84" class="subsection">Sample Output 1</h3><!--SEC END --><pre class="verbatim">No true closed chains
Floor closed chains
</pre>

<!--TOC subsection id="sec87" Sample Input 2-->
<h3 id="sec87" class="subsection">Sample Input 2</h3><!--SEC END --><pre class="verbatim">4
1 1 1 2 2 2
2 2 2 1 5 5
9 4 4 9 4 2
9 4 4 9 9 4
</pre>

<!--TOC subsection id="sec88" Sample Output 2-->
<h3 id="sec88" class="subsection">Sample Output 2</h3><!--SEC END --><pre class="verbatim">No true closed chains
No floor closed chains
</pre>

<!--TOC subsection id="sec85" Sample Input 3-->
<h3 id="sec85" class="subsection">Sample Input 3</h3><!--SEC END --><pre class="verbatim">3
50 50 50 100 100 100
100 100 100 50 50 90
50 50 90 50 50 50
</pre><!--TOC subsection id="sec86" Sample Output 3-->
<h3 id="sec86" class="subsection">Sample Output 3</h3><!--SEC END --><pre class="verbatim">True closed chains
No floor closed chains
</pre>
  
<!--TOC subsection id="sec89" Sample Input 4-->
<h3 id="sec89" class="subsection">Sample Input 4</h3><!--SEC END --><pre class="verbatim">3
1 1 5 1 3 7
1 3 7 4 4 5
4 4 5 1 1 5
</pre><!--TOC subsection id="sec90" Sample Output 4-->
<h3 id="sec90" class="subsection">Sample Output 4</h3><!--SEC END --><pre class="verbatim">True closed chains
Floor closed chains
</pre></div>

    <hr size="2">
    <center><b>SWERC'2016</b><br>
      Computer Science Department<br>
      Universidade do Porto<br>
    <hr size="2">
    
  </body>
</html>
</td>
</tr>
</table>
</center>
</body>
</html>
